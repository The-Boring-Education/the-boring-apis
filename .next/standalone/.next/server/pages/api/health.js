"use strict";(()=>{var e={};e.id=9837,e.ids=[9837],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5828:e=>{e.exports=require("uuid")},2182:(e,t,r)=>{r.r(t),r.d(t,{config:()=>h,default:()=>o,routeModule:()=>i});var a={};r.r(a),r.d(a,{default:()=>handler});var n=r(1802),l=r(7153),s=r(6249),u=r(5912);async function checkServiceHealth(e,t,r=5e3){let a=Date.now();if(!t)return{status:"unknown",url:"not-configured",error:`${e.toUpperCase()}_APP_URL environment variable not configured`};try{let e;let n=`${t}/api/health`;try{e=await fetch(n,{method:"GET",timeout:r,headers:{"User-Agent":"TBE-Health-Check/1.0"}})}catch(a){e=await fetch(t,{method:"GET",timeout:r,headers:{"User-Agent":"TBE-Health-Check/1.0"}})}let l=Date.now()-a;if(e.ok)return{status:"healthy",responseTime:l,url:t};return{status:"unhealthy",responseTime:l,url:t,error:`HTTP ${e.status}: ${e.statusText}`}}catch(n){let e=Date.now()-a,r=n instanceof Error?n.message:"Unknown error";return{status:"unhealthy",responseTime:e,url:t,error:r}}}async function handler(e,t){if("GET"!==e.method)return t.setHeader("Allow",["GET"]),t.status(405).end();try{let e;let[r,a]=await Promise.all([checkServiceHealth("quizzes",u._c.QUIZ_APP_URL),checkServiceHealth("onboarding",u._c.ONBOARDING_URL)]),n={quizzes:r,onboarding:a},l=Object.values(n).map(e=>e.status),s={total:l.length,healthy:l.filter(e=>"healthy"===e).length,unhealthy:l.filter(e=>"unhealthy"===e).length,unknown:l.filter(e=>"unknown"===e).length};e=s.healthy===s.total?"healthy":s.healthy>0?"degraded":"unhealthy";let o="healthy"===e?200:"degraded"===e?207:503,h={status:e,timestamp:new Date().toISOString(),services:n,summary:s};t.status(o).json(h)}catch(r){let e=r instanceof Error?r.message:"Unknown error";t.status(500).json({status:"unhealthy",timestamp:new Date().toISOString(),services:{quizzes:{status:"unknown",url:"error",error:e},onboarding:{status:"unknown",url:"error",error:e}},summary:{total:3,healthy:0,unhealthy:0,unknown:3}})}}let o=(0,s.l)(a,"default"),h=(0,s.l)(a,"config"),i=new n.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/health",pathname:"/api/health",bundlePath:"",filename:""},userland:a})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[4222,5912],()=>__webpack_exec__(2182));module.exports=r})();