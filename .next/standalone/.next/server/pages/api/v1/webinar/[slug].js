"use strict";(()=>{var e={};e.id=6495,e.ids=[6495],e.modules={8097:e=>{e.exports=require("@sentry/nextjs")},2167:e=>{e.exports=require("axios")},3582:e=>{e.exports=require("cors")},1185:e=>{e.exports=require("mongoose")},1649:e=>{e.exports=require("next-auth/react")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3160:e=>{e.exports=require("next/dist/lib/import-next-warning")},5828:e=>{e.exports=require("uuid")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},3481:(e,s,t)=>{t.r(s),t.d(s,{config:()=>R,default:()=>g,routeModule:()=>E});var r={};t.r(r),t.d(r,{default:()=>c});var a=t(1802),u=t(7153),n=t(6249),i=t(5912),l=t(3300),o=t(5166),d=t(3506);let handler=async(e,s)=>{await (0,d.uD)();let{method:t}=e,{slug:r,email:a}=e.query;switch(t){case"GET":if(a)return handleCheckUserRegistration(e,s,r,a);return handleGetWebinarDetails(e,s);case"PATCH":return handleUpdateWebinar(e,s,r);case"DELETE":return handleDeleteWebinar(e,s,r);default:return s.status(i.uT.BAD_REQUEST).json((0,o.OF)({status:!1,message:`Method ${e.method} Not Allowed`}))}},handleGetWebinarDetails=async(e,s)=>{try{let{slug:t}=e.query;if(!t)return s.status(i.uT.BAD_REQUEST).json((0,o.OF)({status:!1,message:"slug is required."}));let{data:r,error:a}=await (0,l.getWebinarDetailsFromDB)(t);if(a||!r)return s.status(i.uT.NOT_FOUND).json((0,o.OF)({status:!1,message:"Webinar not found",error:a}));return s.status(i.uT.OKAY).json((0,o.OF)({status:!0,data:r}))}catch(e){return s.status(i.uT.INTERNAL_SERVER_ERROR).json((0,o.OF)({status:!1,message:"Failed to get webinar details",error:e}))}},handleCheckUserRegistration=async(e,s,t,r)=>{try{if(!t||!r)return s.status(i.uT.BAD_REQUEST).json((0,o.OF)({status:!1,message:"slug and email are required."}));let{data:e,error:a}=await (0,l.checkUserRegistrationInWebinarDB)(t,r);if(a)return s.status(i.uT.INTERNAL_SERVER_ERROR).json((0,o.OF)({status:!1,message:"Failed to check user registration",error:a}));return s.status(i.uT.OKAY).json((0,o.OF)({status:!0,message:e?"User is registered for the webinar.":"User is not registered for the webinar.",data:{isRegistered:e}}))}catch(e){return s.status(i.uT.INTERNAL_SERVER_ERROR).json((0,o.OF)({status:!1,message:"Failed to check user registration",error:e}))}},handleUpdateWebinar=async(e,s,t)=>{try{let r=e.body;if(!t)return s.status(i.uT.BAD_REQUEST).json((0,o.OF)({status:!1,message:"slug is required."}));let{data:a,error:u}=await (0,l.updateWebinarInDB)(t,r);if(u)return s.status(i.uT.INTERNAL_SERVER_ERROR).json((0,o.OF)({status:!1,message:"Failed while updating enrolled users",error:u}));return s.status(i.uT.OKAY).json((0,o.OF)({status:!0,message:"Enrolled users updated successfully",data:a}))}catch(e){return s.status(i.uT.INTERNAL_SERVER_ERROR).json((0,o.OF)({status:!1,message:"Failed while updating enrolled users",error:e}))}},handleDeleteWebinar=async(e,s,t)=>{try{let{error:e}=await (0,l.deleteAWebinarFromDB)(t);if(e)return s.status(i.uT.NOT_FOUND).json((0,o.OF)({status:!1,message:"Failed while fetching webinar",error:e}));return s.status(i.uT.OKAY).json((0,o.OF)({status:!0,message:"Webinar deleted successfully"}))}catch(e){return s.status(i.uT.NOT_FOUND).json((0,o.OF)({status:!1,message:"Failed while deleting webinar",error:e}))}},c=handler,g=(0,n.l)(r,"default"),R=(0,n.l)(r,"config"),E=new a.PagesAPIRouteModule({definition:{kind:u.x.PAGES_API,page:"/api/v1/webinar/[slug]",pathname:"/api/v1/webinar/[slug]",bundlePath:"",filename:""},userland:r})},3506:(e,s,t)=>{t.d(s,{D0:()=>r.D0,uD:()=>r.uD,xM:()=>r.xM});var r=t(7750)}};var s=require("../../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[4222,5912,5166,9276,7750,3300],()=>__webpack_exec__(3481));module.exports=t})();