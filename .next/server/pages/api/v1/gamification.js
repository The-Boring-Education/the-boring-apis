"use strict";(()=>{var e={};e.id=4232,e.ids=[4232],e.modules={8097:e=>{e.exports=require("@sentry/nextjs")},2167:e=>{e.exports=require("axios")},3582:e=>{e.exports=require("cors")},1185:e=>{e.exports=require("mongoose")},1649:e=>{e.exports=require("next-auth/react")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3160:e=>{e.exports=require("next/dist/lib/import-next-warning")},5828:e=>{e.exports=require("uuid")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},7341:(e,s,t)=>{t.r(s),t.d(s,{config:()=>p,default:()=>l,routeModule:()=>m});var r={};t.r(r),t.d(r,{default:()=>d});var a=t(1802),i=t(7153),u=t(6249),o=t(5912),n=t(3300),c=t(3506);let handler=async(e,s)=>{await (0,c.D0)(e,s),await (0,c.uD)();let{query:t}=e,{userId:r}=t;switch(e.method){case"GET":return handleGetUserGamificationRecords(e,s,r);case"POST":return handleUpdateGamificationRecord(e,s,r);default:return s.status(o.uT.BAD_REQUEST).json({success:!1,message:`Method ${e.method} not allowed`})}},handleUpdateGamificationRecord=async(e,s,t)=>{let{body:r}=e,{actionType:a}=r;if(!a)return s.status(o.uT.BAD_REQUEST).json({success:!1,message:"Missing required fields"});let i=await (0,n.updateUserPointsInDB)(t,a);return s.status(o.uT.OKAY).json({success:!0,message:"Gamification record updated successfully",data:i})},handleGetUserGamificationRecords=async(e,s,t)=>{let{data:r,error:a}=await (0,n.getUserPointsFromDB)(t);if(a){let{data:e}=await (0,n.addGamificationDocInDB)(t);return s.status(o.uT.OKAY).json({success:!0,message:"Gamification record created successfully",data:e})}return s.status(o.uT.OKAY).json({success:!0,message:"Gamification records fetched successfully",data:r})},d=handler,l=(0,u.l)(r,"default"),p=(0,u.l)(r,"config"),m=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/v1/gamification",pathname:"/api/v1/gamification",bundlePath:"",filename:""},userland:r})},3506:(e,s,t)=>{t.d(s,{D0:()=>r.D0,uD:()=>r.uD,xM:()=>r.xM});var r=t(7750)}};var s=require("../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[4222,5912,5166,9276,7750,3300],()=>__webpack_exec__(7341));module.exports=t})();