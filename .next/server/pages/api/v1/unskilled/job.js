"use strict";(()=>{var e={};e.id=3234,e.ids=[3234],e.modules={8097:e=>{e.exports=require("@sentry/nextjs")},2167:e=>{e.exports=require("axios")},3582:e=>{e.exports=require("cors")},1185:e=>{e.exports=require("mongoose")},1649:e=>{e.exports=require("next-auth/react")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3160:e=>{e.exports=require("next/dist/lib/import-next-warning")},5828:e=>{e.exports=require("uuid")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},6237:(e,s,t)=>{t.r(s),t.d(s,{config:()=>R,default:()=>p,routeModule:()=>E});var r={};t.r(r),t.d(r,{default:()=>c});var a=t(1802),u=t(7153),o=t(6249),n=t(5912),i=t(3300),d=t(5166),l=t(3506);let handler=async(e,s)=>{switch(await (0,l.uD)(),e.method){case"POST":return handleAddJob(e,s);case"GET":return handleGetJobs(e,s);default:return s.status(n.uT.BAD_REQUEST).json({success:!1,message:`Method ${e.method} not allowed`})}},handleAddJob=async(e,s)=>{try{let t=e.body,{job_id:r,job_title:a,job_description:u,company:o,skills:l,role:c,location:p,experience:R,jobUrl:E,salary:x,platform:g}=t;if(!r||!a||!u||!c?.length||!p||!E||!g||!l?.length)return s.status(n.uT.BAD_REQUEST).json({success:!1,message:"Missing required job details"});let{data:b}=await (0,i.getJobByJobIdFromDB)(r);if(b)return s.status(n.uT.BAD_REQUEST).json({success:!1,message:"Job already exists"});let h=(0,d.dy)(l),_=(0,d.Bk)(h,n.Jq),m=(0,d.Bk)(p,n.EW),T=(0,d.Bk)(c,n.XA),{error:j,data:f}=await (0,i.addJobToDB)({job_id:r,job_title:a,job_description:u,company:o,skills:_,role:T,location:m,experience:R,jobUrl:E,salary:x,platform:g});if(j)return s.status(n.uT.INTERNAL_SERVER_ERROR).json((0,d.OF)({status:!1,message:"Failed to add job",error:j}));return s.status(n.uT.RESOURCE_CREATED).json((0,d.OF)({status:!0,message:"Job added successfully!",data:f}))}catch(e){return s.status(n.uT.INTERNAL_SERVER_ERROR).json({success:!1,message:"An unexpected error occurred while adding the job",error:e})}},handleGetJobs=async(e,s)=>{try{let{page:t="1",limit:r="10",role:a,location:u,skills:o}=e.query,l=parseInt(t,10)||1,c=parseInt(r,10)||10,p={};a&&(p.role=RegExp(a,"i")),u&&(p.location=RegExp(u,"i")),o&&(p.skills={$in:o.split(",")});let{data:R,error:E}=await (0,i.getAllJobsFromDB)(p,l,c);if(E)return s.status(n.uT.INTERNAL_SERVER_ERROR).json({success:!1,message:"Error fetching jobs",error:E});return s.status(n.uT.OKAY).json((0,d.OF)({status:!0,message:"Jobs fetched successfully",data:R}))}catch(e){return s.status(n.uT.INTERNAL_SERVER_ERROR).json({success:!1,message:"An unexpected error occurred while fetching jobs",error:e})}},c=handler,p=(0,o.l)(r,"default"),R=(0,o.l)(r,"config"),E=new a.PagesAPIRouteModule({definition:{kind:u.x.PAGES_API,page:"/api/v1/unskilled/job",pathname:"/api/v1/unskilled/job",bundlePath:"",filename:""},userland:r})},3506:(e,s,t)=>{t.d(s,{D0:()=>r.D0,uD:()=>r.uD,xM:()=>r.xM});var r=t(7750)}};var s=require("../../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[4222,5912,5166,9276,7750,3300],()=>__webpack_exec__(6237));module.exports=t})();